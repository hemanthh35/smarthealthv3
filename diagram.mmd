graph TD
    %% User Entry Points
    A[User Opens Health AI App] --> B{Choose Feature}
    
    %% Main Navigation
    B -->|Symptom Checker| C[Symptom Analysis]
    B -->|Image Analysis| D[Medical Image Analysis]
    B -->|Find Hospitals| E[Healthcare Facility Finder]
    B -->|Dashboard| F[Health Dashboard]
    
    %% Symptom Analysis Flow
    C --> C1[Enter Symptoms]
    C1 --> C2[AI Processes Symptoms]
    C2 --> C3[Generate Analysis]
    C3 --> C4[Provide Recommendations]
    C4 --> C5[Save to Dashboard]
    
    %% Image Analysis Flow
    D --> D1[Upload Medical Image]
    D1 --> D2{Select Analysis Type}
    D2 -->|X-ray| D3[X-ray Analysis]
    D2 -->|Brain Tumor| D4[Brain Scan Analysis]
    D2 -->|Bone Fracture| D5[Fracture Detection]
    
    D3 --> D6[Send to Ollama LLaVA]
    D4 --> D6
    D5 --> D6
    
    D6 --> D7[AI Processes Image]
    D7 --> D8[Generate Medical Analysis]
    D8 --> D9[Provide Diagnosis]
    D9 --> D10[Save Results]
    
    %% Healthcare Facility Finder Flow
    E --> E1[Get User Location]
    E1 --> E2{Location Available?}
    E2 -->|Yes| E3[Search Nearby Facilities]
    E2 -->|No| E4[Manual Address Entry]
    E4 --> E3
    
    E3 --> E5[Query OpenStreetMap API]
    E5 --> E6[Display Facilities on Map]
    E6 --> E7[Show Contact Info]
    
    %% Health Dashboard Flow
    F --> F1[Load Health Data]
    F1 --> F2[Display Statistics]
    F2 --> F3[Show Recent Analyses]
    F3 --> F4[Track Health Trends]
    
    %% Data Management
    C5 --> G[Local Storage]
    D10 --> G
    G --> G1[Compress Data]
    G1 --> G2[Limit Recent Items]
    
    %% API Integration
    D6 --> H[Ollama API]
    H --> H1[Send to LLaVA Model]
    H1 --> H2[Process Analysis]
    H2 --> H3[Return Response]
    
    E5 --> I[OpenStreetMap API]
    I --> I1[Query Facilities]
    I1 --> I2[Calculate Distances]
    I2 --> I3[Return Data]
    
    %% Error Handling
    C2 --> J{Analysis Successful?}
    J -->|No| J1[Display Error]
    J -->|Yes| C3
    
    D7 --> K{Image Analysis Successful?}
    K -->|No| K1[Show Error]
    K -->|Yes| D8
    
    E3 --> L{Location Available?}
    L -->|No| L1[Manual Entry]
    L -->|Yes| E5
    
 